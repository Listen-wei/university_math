{"ast":null,"code":"var _jsxFileName = \"D:\\\\university_math\\\\src\\\\components\\\\Quests\\\\QuestChain.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Paper, Typography, Box, Card, CardContent, Button, LinearProgress, Chip, Dialog, DialogTitle, DialogContent, DialogActions, Stepper, Step, StepLabel, StepContent } from '@mui/material';\nimport { PlayArrow, CheckCircle, Lock, Star, EmojiEvents, Timeline } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction QuestChain() {\n  _s();\n  const [quests, setQuests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedQuest, setSelectedQuest] = useState(null);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [completionStatus, setCompletionStatus] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchQuests();\n    checkCompletion();\n  }, []);\n  const fetchQuests = async () => {\n    try {\n      const response = await fetch('/api/quests/my', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setQuests(data);\n      }\n    } catch (error) {\n      console.error('获取任务列表失败:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const checkCompletion = async () => {\n    try {\n      const response = await fetch('/api/quests/check-completion', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setCompletionStatus(data);\n      }\n    } catch (error) {\n      console.error('检查完成状态失败:', error);\n    }\n  };\n  const generateQuests = async () => {\n    try {\n      setLoading(true); // 添加加载状态\n      const response = await fetch('/api/quests/generate', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setQuests(data.quests);\n        // 添加成功提示\n        console.log('任务链生成成功:', data.msg);\n      } else {\n        const error = await response.json();\n        console.error('生成任务链失败:', error.msg);\n        // 改进错误提示\n        if (error.msg === '请先完成问卷调查') {\n          alert('请先完成问卷调查后再生成任务链');\n          // 可以导航到问卷页面\n          // navigate('/survey');\n        } else {\n          alert(`生成任务链失败: ${error.msg}`);\n        }\n      }\n    } catch (error) {\n      console.error('生成任务链失败:', error);\n      alert('网络错误，请检查网络连接后重试');\n    } finally {\n      setLoading(false); // 结束加载状态\n    }\n  };\n  const startQuest = quest => {\n    // 导航到练习页面，可以传递quest信息\n    navigate('/practice', {\n      state: {\n        subject: quest.subject,\n        chapter: quest.chapter,\n        questId: quest._id\n      }\n    });\n  };\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'completed':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          color: \"success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 16\n        }, this);\n      case 'available':\n      case 'in_progress':\n        return /*#__PURE__*/_jsxDEV(PlayArrow, {\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 16\n        }, this);\n      case 'locked':\n      default:\n        return /*#__PURE__*/_jsxDEV(Lock, {\n          color: \"disabled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'completed':\n        return 'success';\n      case 'available':\n        return 'primary';\n      case 'in_progress':\n        return 'warning';\n      case 'locked':\n      default:\n        return 'default';\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          mt: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: \"\\u52A0\\u8F7D\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 3,\n        mt: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Timeline, {\n          color: \"primary\",\n          sx: {\n            fontSize: 40,\n            mr: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: \"\\u5B66\\u4E60\\u4EFB\\u52A1\\u94FE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), (completionStatus === null || completionStatus === void 0 ? void 0 : completionStatus.completed) && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 4,\n          p: 3,\n          bgcolor: '#fff3cd',\n          borderRadius: 2,\n          border: '1px solid #ffeaa7'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          sx: {\n            color: '#856404',\n            mb: 2\n          },\n          children: [\"\\uD83C\\uDF89 \", completionStatus.message]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => navigate('/rewards'),\n          startIcon: /*#__PURE__*/_jsxDEV(EmojiEvents, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 26\n          }, this),\n          children: \"\\u67E5\\u770B\\u5956\\u52B1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this), quests.length === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: 'center',\n          py: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"\\u8FD8\\u6CA1\\u6709\\u751F\\u6210\\u5B66\\u4E60\\u4EFB\\u52A1\\u94FE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          sx: {\n            mb: 3\n          },\n          children: \"\\u57FA\\u4E8E\\u60A8\\u7684\\u95EE\\u5377\\u6570\\u636E\\uFF0C\\u6211\\u4EEC\\u5C06\\u4E3A\\u60A8\\u751F\\u6210\\u4E2A\\u6027\\u5316\\u7684RPG\\u98CE\\u683C\\u5B66\\u4E60\\u8DEF\\u5F84\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: generateQuests,\n          size: \"large\",\n          children: \"\\u751F\\u6210\\u6211\\u7684\\u4E13\\u5C5E\\u4EFB\\u52A1\\u94FE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Stepper, {\n        orientation: \"vertical\",\n        children: quests.map((quest, index) => /*#__PURE__*/_jsxDEV(Step, {\n          active: quest.status !== 'locked',\n          children: [/*#__PURE__*/_jsxDEV(StepLabel, {\n            icon: getStatusIcon(quest.status),\n            optional: /*#__PURE__*/_jsxDEV(Chip, {\n              label: quest.difficulty,\n              size: \"small\",\n              color: getStatusColor(quest.status)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 21\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: quest.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StepContent, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              sx: {\n                mb: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  gutterBottom: true,\n                  children: quest.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mt: 2,\n                    mb: 2\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    color: \"text.secondary\",\n                    children: [\"\\u79D1\\u76EE\\uFF1A\", quest.subject, \" | \\u7AE0\\u8282\\uFF1A\", quest.chapter]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    color: \"text.secondary\",\n                    children: [\"\\u8981\\u6C42\\uFF1A\\u5B8C\\u6210 \", quest.requirements.questionsToComplete, \" \\u9053\\u9898\\uFF0C\\u51C6\\u786E\\u7387 \\u2265 \", quest.requirements.minAccuracy, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 23\n                }, this), quest.status === 'in_progress' || quest.status === 'completed' ? /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mb: 2\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    gutterBottom: true,\n                    children: [\"\\u8FDB\\u5EA6\\uFF1A\", quest.progress.questionsCompleted, \"/\", quest.requirements.questionsToComplete, \" \\u9898\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(LinearProgress, {\n                    variant: \"determinate\",\n                    value: quest.progress.questionsCompleted / quest.requirements.questionsToComplete * 100,\n                    sx: {\n                      mb: 1\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    children: [\"\\u5F53\\u524D\\u51C6\\u786E\\u7387\\uFF1A\", quest.progress.currentAccuracy.toFixed(1), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 25\n                }, this) : null, /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    gap: 1,\n                    mb: 2\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Chip, {\n                    icon: /*#__PURE__*/_jsxDEV(Star, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 37\n                    }, this),\n                    label: `${quest.rewards.experience} 经验`,\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                    icon: /*#__PURE__*/_jsxDEV(EmojiEvents, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 37\n                    }, this),\n                    label: `${quest.rewards.coins} 金币`,\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 25\n                  }, this), quest.rewards.badges.map((badge, i) => /*#__PURE__*/_jsxDEV(Chip, {\n                    label: badge,\n                    size: \"small\",\n                    color: \"secondary\"\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 27\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    gap: 2\n                  },\n                  children: [quest.status === 'available' || quest.status === 'in_progress' ? /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"contained\",\n                    color: \"primary\",\n                    onClick: () => startQuest(quest),\n                    startIcon: /*#__PURE__*/_jsxDEV(PlayArrow, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 40\n                    }, this),\n                    children: quest.status === 'available' ? '开始任务' : '继续任务'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 27\n                  }, this) : null, /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    onClick: () => {\n                      setSelectedQuest(quest);\n                      setDialogOpen(true);\n                    },\n                    children: \"\\u67E5\\u770B\\u8BE6\\u60C5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 17\n          }, this)]\n        }, quest._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: dialogOpen,\n      onClose: () => setDialogOpen(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: selectedQuest && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: selectedQuest.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            paragraph: true,\n            children: selectedQuest.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            gutterBottom: true,\n            children: \"\\u4EFB\\u52A1\\u8981\\u6C42\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            paragraph: true,\n            children: [\"\\u2022 \\u5B8C\\u6210 \", selectedQuest.requirements.questionsToComplete, \" \\u9053 \", selectedQuest.subject, \" - \", selectedQuest.chapter, \" \\u7684\\u9898\\u76EE\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 126\n            }, this), \"\\u2022 \\u8FBE\\u5230 \", selectedQuest.requirements.minAccuracy, \"% \\u7684\\u51C6\\u786E\\u7387\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 68\n            }, this), \"\\u2022 \\u5728 \", selectedQuest.requirements.timeLimit, \" \\u5C0F\\u65F6\\u5185\\u5B8C\\u6210\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            gutterBottom: true,\n            children: \"\\u5956\\u52B1\\u5185\\u5BB9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: [\"\\u2022 \\u7ECF\\u9A8C\\u503C\\uFF1A\", selectedQuest.rewards.experience, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 57\n            }, this), \"\\u2022 \\u91D1\\u5E01\\uFF1A\", selectedQuest.rewards.coins, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 51\n            }, this), \"\\u2022 \\u5FBD\\u7AE0\\uFF1A\", selectedQuest.rewards.badges.join('、')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setDialogOpen(false),\n            children: \"\\u5173\\u95ED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this), (selectedQuest.status === 'available' || selectedQuest.status === 'in_progress') && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: () => {\n              setDialogOpen(false);\n              startQuest(selectedQuest);\n            },\n            children: \"\\u5F00\\u59CB\\u4EFB\\u52A1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n_s(QuestChain, \"FNYIkxEwxR3bmQOMZVOeOHpAc40=\", false, function () {\n  return [useNavigate];\n});\n_c = QuestChain;\nexport default QuestChain;\nvar _c;\n$RefreshReg$(_c, \"QuestChain\");","map":{"version":3,"names":["React","useState","useEffect","Container","Paper","Typography","Box","Card","CardContent","Button","LinearProgress","Chip","Dialog","DialogTitle","DialogContent","DialogActions","Stepper","Step","StepLabel","StepContent","PlayArrow","CheckCircle","Lock","Star","EmojiEvents","Timeline","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","QuestChain","_s","quests","setQuests","loading","setLoading","selectedQuest","setSelectedQuest","dialogOpen","setDialogOpen","completionStatus","setCompletionStatus","navigate","fetchQuests","checkCompletion","response","fetch","headers","localStorage","getItem","ok","data","json","error","console","generateQuests","method","log","msg","alert","startQuest","quest","state","subject","chapter","questId","_id","getStatusIcon","status","color","fileName","_jsxFileName","lineNumber","columnNumber","getStatusColor","maxWidth","children","sx","display","justifyContent","mt","elevation","p","alignItems","mb","fontSize","mr","variant","completed","bgcolor","borderRadius","border","message","onClick","startIcon","length","textAlign","py","gutterBottom","size","orientation","map","index","active","icon","optional","label","difficulty","title","description","requirements","questionsToComplete","minAccuracy","progress","questionsCompleted","value","currentAccuracy","toFixed","gap","rewards","experience","coins","badges","badge","i","open","onClose","fullWidth","paragraph","timeLimit","join","_c","$RefreshReg$"],"sources":["D:/university_math/src/components/Quests/QuestChain.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container, Paper, Typography, Box, Card,\r\n  CardContent, Button, LinearProgress, Chip,\r\n  Dialog, DialogTitle, DialogContent, DialogActions,\r\n  Stepper, Step, StepLabel, StepContent\r\n} from '@mui/material';\r\nimport {\r\n  PlayArrow, CheckCircle, Lock, Star,\r\n  EmojiEvents, Timeline\r\n} from '@mui/icons-material';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction QuestChain() {\r\n  const [quests, setQuests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedQuest, setSelectedQuest] = useState(null);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [completionStatus, setCompletionStatus] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchQuests();\r\n    checkCompletion();\r\n  }, []);\r\n\r\n  const fetchQuests = async () => {\r\n    try {\r\n      const response = await fetch('/api/quests/my', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setQuests(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('获取任务列表失败:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkCompletion = async () => {\r\n    try {\r\n      const response = await fetch('/api/quests/check-completion', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setCompletionStatus(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('检查完成状态失败:', error);\r\n    }\r\n  };\r\n\r\n  const generateQuests = async () => {\r\n    try {\r\n      setLoading(true); // 添加加载状态\r\n      const response = await fetch('/api/quests/generate', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setQuests(data.quests);\r\n        // 添加成功提示\r\n        console.log('任务链生成成功:', data.msg);\r\n      } else {\r\n        const error = await response.json();\r\n        console.error('生成任务链失败:', error.msg);\r\n        // 改进错误提示\r\n        if (error.msg === '请先完成问卷调查') {\r\n          alert('请先完成问卷调查后再生成任务链');\r\n          // 可以导航到问卷页面\r\n          // navigate('/survey');\r\n        } else {\r\n          alert(`生成任务链失败: ${error.msg}`);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('生成任务链失败:', error);\r\n      alert('网络错误，请检查网络连接后重试');\r\n    } finally {\r\n      setLoading(false); // 结束加载状态\r\n    }\r\n  };\r\n\r\n  const startQuest = (quest) => {\r\n    // 导航到练习页面，可以传递quest信息\r\n    navigate('/practice', { \r\n      state: { \r\n        subject: quest.subject, \r\n        chapter: quest.chapter,\r\n        questId: quest._id \r\n      } \r\n    });\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return <CheckCircle color=\"success\" />;\r\n      case 'available':\r\n      case 'in_progress':\r\n        return <PlayArrow color=\"primary\" />;\r\n      case 'locked':\r\n      default:\r\n        return <Lock color=\"disabled\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'success';\r\n      case 'available':\r\n        return 'primary';\r\n      case 'in_progress':\r\n        return 'warning';\r\n      case 'locked':\r\n      default:\r\n        return 'default';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container maxWidth=\"lg\">\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\r\n          <Typography>加载中...</Typography>\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\">\r\n      <Paper elevation={3} sx={{ p: 3, mt: 2 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\r\n          <Timeline color=\"primary\" sx={{ fontSize: 40, mr: 2 }} />\r\n          <Typography variant=\"h4\">\r\n            学习任务链\r\n          </Typography>\r\n        </Box>\r\n\r\n        {completionStatus?.completed && (\r\n          <Box sx={{ mb: 4, p: 3, bgcolor: '#fff3cd', borderRadius: 2, border: '1px solid #ffeaa7' }}>\r\n            <Typography variant=\"h5\" sx={{ color: '#856404', mb: 2 }}>\r\n              🎉 {completionStatus.message}\r\n            </Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => navigate('/rewards')}\r\n              startIcon={<EmojiEvents />}\r\n            >\r\n              查看奖励\r\n            </Button>\r\n          </Box>\r\n        )}\r\n\r\n        {quests.length === 0 ? (\r\n          <Box sx={{ textAlign: 'center', py: 4 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              还没有生成学习任务链\r\n            </Typography>\r\n            <Typography variant=\"body1\" sx={{ mb: 3 }}>\r\n              基于您的问卷数据，我们将为您生成个性化的RPG风格学习路径\r\n            </Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={generateQuests}\r\n              size=\"large\"\r\n            >\r\n              生成我的专属任务链\r\n            </Button>\r\n          </Box>\r\n        ) : (\r\n          <Stepper orientation=\"vertical\">\r\n            {quests.map((quest, index) => (\r\n              <Step key={quest._id} active={quest.status !== 'locked'}>\r\n                <StepLabel\r\n                  icon={getStatusIcon(quest.status)}\r\n                  optional={\r\n                    <Chip \r\n                      label={quest.difficulty} \r\n                      size=\"small\" \r\n                      color={getStatusColor(quest.status)}\r\n                    />\r\n                  }\r\n                >\r\n                  <Typography variant=\"h6\">{quest.title}</Typography>\r\n                </StepLabel>\r\n                <StepContent>\r\n                  <Card sx={{ mb: 2 }}>\r\n                    <CardContent>\r\n                      <Typography variant=\"body1\" gutterBottom>\r\n                        {quest.description}\r\n                      </Typography>\r\n                      \r\n                      <Box sx={{ mt: 2, mb: 2 }}>\r\n                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                          科目：{quest.subject} | 章节：{quest.chapter}\r\n                        </Typography>\r\n                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                          要求：完成 {quest.requirements.questionsToComplete} 道题，准确率 ≥ {quest.requirements.minAccuracy}%\r\n                        </Typography>\r\n                      </Box>\r\n\r\n                      {quest.status === 'in_progress' || quest.status === 'completed' ? (\r\n                        <Box sx={{ mb: 2 }}>\r\n                          <Typography variant=\"body2\" gutterBottom>\r\n                            进度：{quest.progress.questionsCompleted}/{quest.requirements.questionsToComplete} 题\r\n                          </Typography>\r\n                          <LinearProgress \r\n                            variant=\"determinate\" \r\n                            value={(quest.progress.questionsCompleted / quest.requirements.questionsToComplete) * 100}\r\n                            sx={{ mb: 1 }}\r\n                          />\r\n                          <Typography variant=\"body2\">\r\n                            当前准确率：{quest.progress.currentAccuracy.toFixed(1)}%\r\n                          </Typography>\r\n                        </Box>\r\n                      ) : null}\r\n\r\n                      <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\r\n                        <Chip icon={<Star />} label={`${quest.rewards.experience} 经验`} size=\"small\" />\r\n                        <Chip icon={<EmojiEvents />} label={`${quest.rewards.coins} 金币`} size=\"small\" />\r\n                        {quest.rewards.badges.map((badge, i) => (\r\n                          <Chip key={i} label={badge} size=\"small\" color=\"secondary\" />\r\n                        ))}\r\n                      </Box>\r\n\r\n                      <Box sx={{ display: 'flex', gap: 2 }}>\r\n                        {quest.status === 'available' || quest.status === 'in_progress' ? (\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={() => startQuest(quest)}\r\n                            startIcon={<PlayArrow />}\r\n                          >\r\n                            {quest.status === 'available' ? '开始任务' : '继续任务'}\r\n                          </Button>\r\n                        ) : null}\r\n                        \r\n                        <Button\r\n                          variant=\"outlined\"\r\n                          onClick={() => {\r\n                            setSelectedQuest(quest);\r\n                            setDialogOpen(true);\r\n                          }}\r\n                        >\r\n                          查看详情\r\n                        </Button>\r\n                      </Box>\r\n                    </CardContent>\r\n                  </Card>\r\n                </StepContent>\r\n              </Step>\r\n            ))}\r\n          </Stepper>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* 任务详情对话框 */}\r\n      <Dialog open={dialogOpen} onClose={() => setDialogOpen(false)} maxWidth=\"md\" fullWidth>\r\n        {selectedQuest && (\r\n          <>\r\n            <DialogTitle>{selectedQuest.title}</DialogTitle>\r\n            <DialogContent>\r\n              <Typography variant=\"body1\" paragraph>\r\n                {selectedQuest.description}\r\n              </Typography>\r\n              \r\n              <Typography variant=\"h6\" gutterBottom>\r\n                任务要求\r\n              </Typography>\r\n              <Typography variant=\"body2\" paragraph>\r\n                • 完成 {selectedQuest.requirements.questionsToComplete} 道 {selectedQuest.subject} - {selectedQuest.chapter} 的题目<br/>\r\n                • 达到 {selectedQuest.requirements.minAccuracy}% 的准确率<br/>\r\n                • 在 {selectedQuest.requirements.timeLimit} 小时内完成\r\n              </Typography>\r\n              \r\n              <Typography variant=\"h6\" gutterBottom>\r\n                奖励内容\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                • 经验值：{selectedQuest.rewards.experience}<br/>\r\n                • 金币：{selectedQuest.rewards.coins}<br/>\r\n                • 徽章：{selectedQuest.rewards.badges.join('、')}\r\n              </Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={() => setDialogOpen(false)}>关闭</Button>\r\n              {(selectedQuest.status === 'available' || selectedQuest.status === 'in_progress') && (\r\n                <Button \r\n                  variant=\"contained\" \r\n                  onClick={() => {\r\n                    setDialogOpen(false);\r\n                    startQuest(selectedQuest);\r\n                  }}\r\n                >\r\n                  开始任务\r\n                </Button>\r\n              )}\r\n            </DialogActions>\r\n          </>\r\n        )}\r\n      </Dialog>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default QuestChain;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}