{"ast":null,"code":"var _jsxFileName = \"D:\\\\university_math\\\\src\\\\components\\\\Questions\\\\QuestionUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Container, Paper, Typography, Box, Button, TextField, Grid, Card, CardContent, CardMedia, IconButton, Tabs, Tab, CircularProgress, Alert, Snackbar, Tooltip } from '@mui/material';\nimport { CloudUpload, CameraAlt, Mic, MicOff, Send, Delete, Help } from '@mui/icons-material';\nimport { createWorker } from 'tesseract.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction QuestionUpload() {\n  _s();\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState(0);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageFile, setImageFile] = useState(null);\n  const [textInput, setTextInput] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const [recognizedText, setRecognizedText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const fileInputRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n\n  // 处理标签页切换\n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n    // 重置状态\n    setImagePreview(null);\n    setImageFile(null);\n    setTextInput('');\n    setRecognizedText('');\n    setError('');\n  };\n\n  // 处理图片选择\n  const handleImageSelect = event => {\n    const file = event.target.files[0];\n    if (file) {\n      if (!file.type.match('image.*')) {\n        setError('请上传图片文件');\n        return;\n      }\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onload = e => {\n        setImagePreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n      setError('');\n    }\n  };\n\n  // 处理图片删除\n  const handleImageDelete = () => {\n    setImagePreview(null);\n    setImageFile(null);\n    setRecognizedText('');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // 处理图片识别\n  const handleImageRecognition = async () => {\n    if (!imageFile) {\n      setError('请先上传图片');\n      return;\n    }\n    setLoading(true);\n    setProgress(0);\n    setError('');\n    try {\n      const worker = await createWorker({\n        logger: m => {\n          if (m.status === 'recognizing text') {\n            setProgress(parseInt(m.progress * 100));\n          }\n        }\n      });\n      await worker.loadLanguage('eng+chi_sim+equ');\n      await worker.initialize('eng+chi_sim+equ');\n      const {\n        data\n      } = await worker.recognize(imageFile);\n      setRecognizedText(data.text);\n      await worker.terminate();\n      setLoading(false);\n    } catch (err) {\n      console.error('图像识别失败:', err);\n      setError('图像识别失败，请重试');\n      setLoading(false);\n    }\n  };\n\n  // 处理语音录制开始\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      mediaRecorderRef.current = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n      mediaRecorderRef.current.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n      mediaRecorderRef.current.onstop = async () => {\n        const audioBlob = new Blob(audioChunksRef.current, {\n          type: 'audio/wav'\n        });\n        await processAudioRecognition(audioBlob);\n      };\n      mediaRecorderRef.current.start();\n      setIsRecording(true);\n      setError('');\n    } catch (err) {\n      console.error('无法访问麦克风:', err);\n      setError('无法访问麦克风，请检查权限设置');\n    }\n  };\n\n  // 处理语音录制结束\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n\n      // 停止所有音轨\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n    }\n  };\n\n  // 处理语音识别\n  const processAudioRecognition = async audioBlob => {\n    setLoading(true);\n    setError('');\n    try {\n      // 创建表单数据\n      const formData = new FormData();\n      formData.append('audio', audioBlob);\n\n      // 发送到后端API进行语音识别\n      const response = await fetch('/api/speech-to-text', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setTextInput(data.text);\n      } else {\n        throw new Error('语音识别请求失败');\n      }\n    } catch (err) {\n      console.error('语音识别失败:', err);\n      setError('语音识别失败，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 处理问题提交\n  const handleSubmitQuestion = async () => {\n    let questionText = '';\n\n    // 根据当前标签页获取问题文本\n    if (activeTab === 0) {\n      // 图片上传\n      questionText = recognizedText;\n    } else if (activeTab === 1) {\n      // 语音输入\n      questionText = textInput;\n    } else if (activeTab === 2) {\n      // 文字输入\n      questionText = textInput;\n    }\n    if (!questionText.trim()) {\n      setError('请输入或上传题目内容');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      // 发送到后端API\n      const response = await fetch('/api/questions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          content: questionText,\n          type: activeTab === 0 ? 'image' : activeTab === 1 ? 'voice' : 'text'\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setSuccess(true);\n        // 导航到解题页面\n        setTimeout(() => {\n          navigate(`/solve-question/${data.questionId}`);\n        }, 1500);\n      } else {\n        throw new Error('提交问题失败');\n      }\n    } catch (err) {\n      console.error('提交问题失败:', err);\n      setError('提交问题失败，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 渲染图片上传标签页\n  const renderImageUploadTab = () => /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 3\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          sx: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u4E0A\\u4F20\\u9898\\u76EE\\u56FE\\u7247\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              paragraph: true,\n              children: \"\\u652F\\u6301JPG\\u3001PNG\\u683C\\u5F0F\\u7684\\u56FE\\u7247\\uFF0C\\u8BF7\\u786E\\u4FDD\\u56FE\\u7247\\u6E05\\u6670\\u53EF\\u89C1\\u3002\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: 'center',\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                accept: \"image/*\",\n                style: {\n                  display: 'none'\n                },\n                id: \"image-upload\",\n                type: \"file\",\n                onChange: handleImageSelect,\n                ref: fileInputRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"image-upload\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  component: \"span\",\n                  startIcon: /*#__PURE__*/_jsxDEV(CloudUpload, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 32\n                  }, this),\n                  disabled: loading,\n                  children: \"\\u9009\\u62E9\\u56FE\\u7247\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                color: \"primary\",\n                onClick: handleImageRecognition,\n                disabled: !imagePreview || loading,\n                sx: {\n                  ml: 2\n                },\n                children: loading ? '识别中...' : '识别文字'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), loading && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                variant: \"determinate\",\n                value: progress\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                sx: {\n                  mt: 1\n                },\n                children: [progress, \"% \\u5B8C\\u6210\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          sx: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u9884\\u89C8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), imagePreview ? /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                position: 'relative'\n              },\n              children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n                component: \"img\",\n                image: imagePreview,\n                alt: \"\\u9898\\u76EE\\u56FE\\u7247\",\n                sx: {\n                  maxHeight: 200,\n                  objectFit: 'contain',\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                color: \"error\",\n                onClick: handleImageDelete,\n                sx: {\n                  position: 'absolute',\n                  top: 0,\n                  right: 0\n                },\n                children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                height: 200,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                bgcolor: '#f5f5f5',\n                borderRadius: 1\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: \"\\u672A\\u9009\\u62E9\\u56FE\\u7247\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u8BC6\\u522B\\u7ED3\\u679C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              multiline: true,\n              rows: 4,\n              variant: \"outlined\",\n              placeholder: \"\\u8BC6\\u522B\\u7684\\u6587\\u5B57\\u5C06\\u663E\\u793A\\u5728\\u8FD9\\u91CC...\",\n              value: recognizedText,\n              onChange: e => setRecognizedText(e.target.value),\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: 'flex-end',\n                mt: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                color: \"primary\",\n                endIcon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 28\n                }, this),\n                onClick: handleSubmitQuestion,\n                disabled: !recognizedText.trim() || loading,\n                children: \"\\u63D0\\u4EA4\\u9898\\u76EE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 5\n  }, this);\n\n  // 渲染语音输入标签页\n  const renderVoiceInputTab = () => /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 3\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      variant: \"outlined\",\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"\\u8BED\\u97F3\\u8F93\\u5165\\u9898\\u76EE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          paragraph: true,\n          children: \"\\u70B9\\u51FB\\u4E0B\\u65B9\\u6309\\u94AE\\u5F00\\u59CB\\u5F55\\u97F3\\uFF0C\\u8BF4\\u51FA\\u60A8\\u7684\\u9898\\u76EE\\uFF0C\\u5B8C\\u6210\\u540E\\u70B9\\u51FB\\u505C\\u6B62\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'center',\n            my: 3\n          },\n          children: isRecording ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"error\",\n            startIcon: /*#__PURE__*/_jsxDEV(MicOff, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 28\n            }, this),\n            onClick: stopRecording,\n            disabled: loading,\n            children: \"\\u505C\\u6B62\\u5F55\\u97F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            startIcon: /*#__PURE__*/_jsxDEV(Mic, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 28\n            }, this),\n            onClick: startRecording,\n            disabled: loading,\n            children: \"\\u5F00\\u59CB\\u5F55\\u97F3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          multiline: true,\n          rows: 4,\n          variant: \"outlined\",\n          label: \"\\u8BC6\\u522B\\u7ED3\\u679C\",\n          placeholder: \"\\u8BED\\u97F3\\u8BC6\\u522B\\u7684\\u6587\\u5B57\\u5C06\\u663E\\u793A\\u5728\\u8FD9\\u91CC...\",\n          value: textInput,\n          onChange: e => setTextInput(e.target.value),\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            endIcon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 24\n            }, this),\n            onClick: handleSubmitQuestion,\n            disabled: !textInput.trim() || loading,\n            children: \"\\u63D0\\u4EA4\\u9898\\u76EE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 386,\n    columnNumber: 5\n  }, this);\n\n  // 渲染文字输入标签页\n  const renderTextInputTab = () => /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 3\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      variant: \"outlined\",\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"\\u6587\\u5B57\\u8F93\\u5165\\u9898\\u76EE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          paragraph: true,\n          children: \"\\u76F4\\u63A5\\u8F93\\u5165\\u60A8\\u7684\\u9898\\u76EE\\u5185\\u5BB9\\uFF0C\\u652F\\u6301\\u6570\\u5B66\\u516C\\u5F0F\\u548C\\u7B26\\u53F7\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          multiline: true,\n          rows: 6,\n          variant: \"outlined\",\n          label: \"\\u9898\\u76EE\\u5185\\u5BB9\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u9898\\u76EE...\",\n          value: textInput,\n          onChange: e => setTextInput(e.target.value),\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            endIcon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 24\n            }, this),\n            onClick: handleSubmitQuestion,\n            disabled: !textInput.trim() || loading,\n            children: \"\\u63D0\\u4EA4\\u9898\\u76EE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 450,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 4,\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Help, {\n          color: \"primary\",\n          sx: {\n            fontSize: 40,\n            mr: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: \"\\u9898\\u76EE\\u4E0A\\u4F20\\u4E0E\\u8BC6\\u522B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        paragraph: true,\n        children: \"\\u60A8\\u53EF\\u4EE5\\u901A\\u8FC7\\u56FE\\u7247\\u4E0A\\u4F20\\u3001\\u8BED\\u97F3\\u8F93\\u5165\\u6216\\u6587\\u5B57\\u8F93\\u5165\\u7684\\u65B9\\u5F0F\\u63D0\\u4EA4\\u6570\\u5B66\\u9898\\u76EE\\uFF0C\\u7CFB\\u7EDF\\u5C06\\u4E3A\\u60A8\\u63D0\\u4F9B\\u8BE6\\u7EC6\\u7684\\u89E3\\u7B54\\u6B65\\u9AA4\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n        value: activeTab,\n        onChange: handleTabChange,\n        variant: \"fullWidth\",\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          icon: /*#__PURE__*/_jsxDEV(CameraAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 22\n          }, this),\n          label: \"\\u56FE\\u7247\\u4E0A\\u4F20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          icon: /*#__PURE__*/_jsxDEV(Mic, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 22\n          }, this),\n          label: \"\\u8BED\\u97F3\\u8F93\\u5165\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          icon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 22\n          }, this),\n          label: \"\\u6587\\u5B57\\u8F93\\u5165\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, this), activeTab === 0 && renderImageUploadTab(), activeTab === 1 && renderVoiceInputTab(), activeTab === 2 && renderTextInputTab(), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mt: 3\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: success,\n        autoHideDuration: 3000,\n        onClose: () => setSuccess(false),\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"success\",\n          sx: {\n            width: '100%'\n          },\n          children: \"\\u9898\\u76EE\\u63D0\\u4EA4\\u6210\\u529F\\uFF0C\\u6B63\\u5728\\u8DF3\\u8F6C\\u5230\\u89E3\\u7B54\\u9875\\u9762...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 489,\n    columnNumber: 5\n  }, this);\n}\n_s(QuestionUpload, \"1KQvaQnT9pjqbDcSHhB/tgQjMXI=\", false, function () {\n  return [useNavigate];\n});\n_c = QuestionUpload;\nexport default QuestionUpload;\nvar _c;\n$RefreshReg$(_c, \"QuestionUpload\");","map":{"version":3,"names":["React","useState","useRef","useNavigate","Container","Paper","Typography","Box","Button","TextField","Grid","Card","CardContent","CardMedia","IconButton","Tabs","Tab","CircularProgress","Alert","Snackbar","Tooltip","CloudUpload","CameraAlt","Mic","MicOff","Send","Delete","Help","createWorker","jsxDEV","_jsxDEV","QuestionUpload","_s","navigate","activeTab","setActiveTab","imagePreview","setImagePreview","imageFile","setImageFile","textInput","setTextInput","isRecording","setIsRecording","recognizedText","setRecognizedText","loading","setLoading","error","setError","success","setSuccess","progress","setProgress","fileInputRef","mediaRecorderRef","audioChunksRef","handleTabChange","event","newValue","handleImageSelect","file","target","files","type","match","reader","FileReader","onload","e","result","readAsDataURL","handleImageDelete","current","value","handleImageRecognition","worker","logger","m","status","parseInt","loadLanguage","initialize","data","recognize","text","terminate","err","console","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","MediaRecorder","ondataavailable","size","push","onstop","audioBlob","Blob","processAudioRecognition","start","stopRecording","stop","getTracks","forEach","track","formData","FormData","append","response","fetch","method","body","headers","localStorage","getItem","ok","json","Error","handleSubmitQuestion","questionText","trim","JSON","stringify","content","setTimeout","questionId","renderImageUploadTab","sx","mt","children","container","spacing","item","xs","md","variant","height","display","flexDirection","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","paragraph","justifyContent","accept","style","id","onChange","ref","htmlFor","component","startIcon","disabled","onClick","ml","alignItems","position","image","alt","maxHeight","objectFit","mb","top","right","bgcolor","borderRadius","fullWidth","multiline","rows","placeholder","endIcon","renderVoiceInputTab","my","label","renderTextInputTab","maxWidth","elevation","p","fontSize","mr","indicatorColor","textColor","icon","severity","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","width","_c","$RefreshReg$"],"sources":["D:/university_math/src/components/Questions/QuestionUpload.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  IconButton,\r\n  Tabs,\r\n  Tab,\r\n  CircularProgress,\r\n  Alert,\r\n  Snackbar,\r\n  Tooltip\r\n} from '@mui/material';\r\nimport {\r\n  CloudUpload,\r\n  CameraAlt,\r\n  Mic,\r\n  MicOff,\r\n  Send,\r\n  Delete,\r\n  Help\r\n} from '@mui/icons-material';\r\nimport { createWorker } from 'tesseract.js';\r\n\r\nfunction QuestionUpload() {\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [textInput, setTextInput] = useState('');\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [recognizedText, setRecognizedText] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  \r\n  const fileInputRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n  \r\n  // 处理标签页切换\r\n  const handleTabChange = (event, newValue) => {\r\n    setActiveTab(newValue);\r\n    // 重置状态\r\n    setImagePreview(null);\r\n    setImageFile(null);\r\n    setTextInput('');\r\n    setRecognizedText('');\r\n    setError('');\r\n  };\r\n  \r\n  // 处理图片选择\r\n  const handleImageSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      if (!file.type.match('image.*')) {\r\n        setError('请上传图片文件');\r\n        return;\r\n      }\r\n      \r\n      setImageFile(file);\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImagePreview(e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n      setError('');\r\n    }\r\n  };\r\n  \r\n  // 处理图片删除\r\n  const handleImageDelete = () => {\r\n    setImagePreview(null);\r\n    setImageFile(null);\r\n    setRecognizedText('');\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n  \r\n  // 处理图片识别\r\n  const handleImageRecognition = async () => {\r\n    if (!imageFile) {\r\n      setError('请先上传图片');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setProgress(0);\r\n    setError('');\r\n    \r\n    try {\r\n      const worker = await createWorker({\r\n        logger: m => {\r\n          if (m.status === 'recognizing text') {\r\n            setProgress(parseInt(m.progress * 100));\r\n          }\r\n        },\r\n      });\r\n      \r\n      await worker.loadLanguage('eng+chi_sim+equ');\r\n      await worker.initialize('eng+chi_sim+equ');\r\n      const { data } = await worker.recognize(imageFile);\r\n      setRecognizedText(data.text);\r\n      await worker.terminate();\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('图像识别失败:', err);\r\n      setError('图像识别失败，请重试');\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 处理语音录制开始\r\n  const startRecording = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      mediaRecorderRef.current = new MediaRecorder(stream);\r\n      audioChunksRef.current = [];\r\n      \r\n      mediaRecorderRef.current.ondataavailable = (event) => {\r\n        if (event.data.size > 0) {\r\n          audioChunksRef.current.push(event.data);\r\n        }\r\n      };\r\n      \r\n      mediaRecorderRef.current.onstop = async () => {\r\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' });\r\n        await processAudioRecognition(audioBlob);\r\n      };\r\n      \r\n      mediaRecorderRef.current.start();\r\n      setIsRecording(true);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('无法访问麦克风:', err);\r\n      setError('无法访问麦克风，请检查权限设置');\r\n    }\r\n  };\r\n  \r\n  // 处理语音录制结束\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && isRecording) {\r\n      mediaRecorderRef.current.stop();\r\n      setIsRecording(false);\r\n      \r\n      // 停止所有音轨\r\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\r\n    }\r\n  };\r\n  \r\n  // 处理语音识别\r\n  const processAudioRecognition = async (audioBlob) => {\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      // 创建表单数据\r\n      const formData = new FormData();\r\n      formData.append('audio', audioBlob);\r\n      \r\n      // 发送到后端API进行语音识别\r\n      const response = await fetch('/api/speech-to-text', {\r\n        method: 'POST',\r\n        body: formData,\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setTextInput(data.text);\r\n      } else {\r\n        throw new Error('语音识别请求失败');\r\n      }\r\n    } catch (err) {\r\n      console.error('语音识别失败:', err);\r\n      setError('语音识别失败，请重试');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 处理问题提交\r\n  const handleSubmitQuestion = async () => {\r\n    let questionText = '';\r\n    \r\n    // 根据当前标签页获取问题文本\r\n    if (activeTab === 0) { // 图片上传\r\n      questionText = recognizedText;\r\n    } else if (activeTab === 1) { // 语音输入\r\n      questionText = textInput;\r\n    } else if (activeTab === 2) { // 文字输入\r\n      questionText = textInput;\r\n    }\r\n    \r\n    if (!questionText.trim()) {\r\n      setError('请输入或上传题目内容');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      // 发送到后端API\r\n      const response = await fetch('/api/questions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({\r\n          content: questionText,\r\n          type: activeTab === 0 ? 'image' : (activeTab === 1 ? 'voice' : 'text')\r\n        })\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSuccess(true);\r\n        // 导航到解题页面\r\n        setTimeout(() => {\r\n          navigate(`/solve-question/${data.questionId}`);\r\n        }, 1500);\r\n      } else {\r\n        throw new Error('提交问题失败');\r\n      }\r\n    } catch (err) {\r\n      console.error('提交问题失败:', err);\r\n      setError('提交问题失败，请重试');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 渲染图片上传标签页\r\n  const renderImageUploadTab = () => (\r\n    <Box sx={{ mt: 3 }}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={6}>\r\n          <Card variant=\"outlined\" sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                上传题目图片\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n                支持JPG、PNG格式的图片，请确保图片清晰可见。\r\n              </Typography>\r\n              \r\n              <Box sx={{ display: 'flex', justifyContent: 'center', mt: 2 }}>\r\n                <input\r\n                  accept=\"image/*\"\r\n                  style={{ display: 'none' }}\r\n                  id=\"image-upload\"\r\n                  type=\"file\"\r\n                  onChange={handleImageSelect}\r\n                  ref={fileInputRef}\r\n                />\r\n                <label htmlFor=\"image-upload\">\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    component=\"span\"\r\n                    startIcon={<CloudUpload />}\r\n                    disabled={loading}\r\n                  >\r\n                    选择图片\r\n                  </Button>\r\n                </label>\r\n                \r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={handleImageRecognition}\r\n                  disabled={!imagePreview || loading}\r\n                  sx={{ ml: 2 }}\r\n                >\r\n                  {loading ? '识别中...' : '识别文字'}\r\n                </Button>\r\n              </Box>\r\n              \r\n              {loading && (\r\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', mt: 2 }}>\r\n                  <CircularProgress variant=\"determinate\" value={progress} />\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\r\n                    {progress}% 完成\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} md={6}>\r\n          <Card variant=\"outlined\" sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                预览\r\n              </Typography>\r\n              \r\n              {imagePreview ? (\r\n                <Box sx={{ position: 'relative' }}>\r\n                  <CardMedia\r\n                    component=\"img\"\r\n                    image={imagePreview}\r\n                    alt=\"题目图片\"\r\n                    sx={{ maxHeight: 200, objectFit: 'contain', mb: 2 }}\r\n                  />\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    color=\"error\"\r\n                    onClick={handleImageDelete}\r\n                    sx={{ position: 'absolute', top: 0, right: 0 }}\r\n                  >\r\n                    <Delete />\r\n                  </IconButton>\r\n                </Box>\r\n              ) : (\r\n                <Box\r\n                  sx={{\r\n                    height: 200,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    bgcolor: '#f5f5f5',\r\n                    borderRadius: 1\r\n                  }}\r\n                >\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    未选择图片\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        <Grid item xs={12}>\r\n          <Card variant=\"outlined\">\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                识别结果\r\n              </Typography>\r\n              \r\n              <TextField\r\n                fullWidth\r\n                multiline\r\n                rows={4}\r\n                variant=\"outlined\"\r\n                placeholder=\"识别的文字将显示在这里...\"\r\n                value={recognizedText}\r\n                onChange={(e) => setRecognizedText(e.target.value)}\r\n                disabled={loading}\r\n              />\r\n              \r\n              <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  endIcon={<Send />}\r\n                  onClick={handleSubmitQuestion}\r\n                  disabled={!recognizedText.trim() || loading}\r\n                >\r\n                  提交题目\r\n                </Button>\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n  \r\n  // 渲染语音输入标签页\r\n  const renderVoiceInputTab = () => (\r\n    <Box sx={{ mt: 3 }}>\r\n      <Card variant=\"outlined\">\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            语音输入题目\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n            点击下方按钮开始录音，说出您的题目，完成后点击停止。\r\n          </Typography>\r\n          \r\n          <Box sx={{ display: 'flex', justifyContent: 'center', my: 3 }}>\r\n            {isRecording ? (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"error\"\r\n                startIcon={<MicOff />}\r\n                onClick={stopRecording}\r\n                disabled={loading}\r\n              >\r\n                停止录音\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<Mic />}\r\n                onClick={startRecording}\r\n                disabled={loading}\r\n              >\r\n                开始录音\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          \r\n          <TextField\r\n            fullWidth\r\n            multiline\r\n            rows={4}\r\n            variant=\"outlined\"\r\n            label=\"识别结果\"\r\n            placeholder=\"语音识别的文字将显示在这里...\"\r\n            value={textInput}\r\n            onChange={(e) => setTextInput(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n          \r\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              endIcon={<Send />}\r\n              onClick={handleSubmitQuestion}\r\n              disabled={!textInput.trim() || loading}\r\n            >\r\n              提交题目\r\n            </Button>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n  \r\n  // 渲染文字输入标签页\r\n  const renderTextInputTab = () => (\r\n    <Box sx={{ mt: 3 }}>\r\n      <Card variant=\"outlined\">\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            文字输入题目\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n            直接输入您的题目内容，支持数学公式和符号。\r\n          </Typography>\r\n          \r\n          <TextField\r\n            fullWidth\r\n            multiline\r\n            rows={6}\r\n            variant=\"outlined\"\r\n            label=\"题目内容\"\r\n            placeholder=\"请输入您的题目...\"\r\n            value={textInput}\r\n            onChange={(e) => setTextInput(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n          \r\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              endIcon={<Send />}\r\n              onClick={handleSubmitQuestion}\r\n              disabled={!textInput.trim() || loading}\r\n            >\r\n              提交题目\r\n            </Button>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n  \r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Paper elevation={3} sx={{ p: 4, mt: 4 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\r\n          <Help color=\"primary\" sx={{ fontSize: 40, mr: 2 }} />\r\n          <Typography variant=\"h4\">\r\n            题目上传与识别\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Typography variant=\"body1\" paragraph>\r\n          您可以通过图片上传、语音输入或文字输入的方式提交数学题目，系统将为您提供详细的解答步骤。\r\n        </Typography>\r\n        \r\n        <Tabs\r\n          value={activeTab}\r\n          onChange={handleTabChange}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n        >\r\n          <Tab icon={<CameraAlt />} label=\"图片上传\" />\r\n          <Tab icon={<Mic />} label=\"语音输入\" />\r\n          <Tab icon={<Send />} label=\"文字输入\" />\r\n        </Tabs>\r\n        \r\n        {activeTab === 0 && renderImageUploadTab()}\r\n        {activeTab === 1 && renderVoiceInputTab()}\r\n        {activeTab === 2 && renderTextInputTab()}\r\n        \r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mt: 3 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        \r\n        <Snackbar\r\n          open={success}\r\n          autoHideDuration={3000}\r\n          onClose={() => setSuccess(false)}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n        >\r\n          <Alert severity=\"success\" sx={{ width: '100%' }}>\r\n            题目提交成功，正在跳转到解答页面...\r\n          </Alert>\r\n        </Snackbar>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default QuestionUpload;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC/C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SACEC,SAAS,EACTC,KAAK,EACLC,UAAU,EACVC,GAAG,EACHC,MAAM,EACNC,SAAS,EACTC,IAAI,EACJC,IAAI,EACJC,WAAW,EACXC,SAAS,EACTC,UAAU,EACVC,IAAI,EACJC,GAAG,EACHC,gBAAgB,EAChBC,KAAK,EACLC,QAAQ,EACRC,OAAO,QACF,eAAe;AACtB,SACEC,WAAW,EACXC,SAAS,EACTC,GAAG,EACHC,MAAM,EACNC,IAAI,EACJC,MAAM,EACNC,IAAI,QACC,qBAAqB;AAC5B,SAASC,YAAY,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAMC,QAAQ,GAAG9B,WAAW,CAAC,CAAC;EAC9B,MAAM,CAAC+B,SAAS,EAAEC,YAAY,CAAC,GAAGlC,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACmC,YAAY,EAAEC,eAAe,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACqC,SAAS,EAAEC,YAAY,CAAC,GAAGtC,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACuC,SAAS,EAAEC,YAAY,CAAC,GAAGxC,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACyC,WAAW,EAAEC,cAAc,CAAC,GAAG1C,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC2C,cAAc,EAAEC,iBAAiB,CAAC,GAAG5C,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAAC6C,OAAO,EAAEC,UAAU,CAAC,GAAG9C,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC+C,KAAK,EAAEC,QAAQ,CAAC,GAAGhD,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACiD,OAAO,EAAEC,UAAU,CAAC,GAAGlD,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACmD,QAAQ,EAAEC,WAAW,CAAC,GAAGpD,QAAQ,CAAC,CAAC,CAAC;EAE3C,MAAMqD,YAAY,GAAGpD,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMqD,gBAAgB,GAAGrD,MAAM,CAAC,IAAI,CAAC;EACrC,MAAMsD,cAAc,GAAGtD,MAAM,CAAC,EAAE,CAAC;;EAEjC;EACA,MAAMuD,eAAe,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;IAC3CxB,YAAY,CAACwB,QAAQ,CAAC;IACtB;IACAtB,eAAe,CAAC,IAAI,CAAC;IACrBE,YAAY,CAAC,IAAI,CAAC;IAClBE,YAAY,CAAC,EAAE,CAAC;IAChBI,iBAAiB,CAAC,EAAE,CAAC;IACrBI,QAAQ,CAAC,EAAE,CAAC;EACd,CAAC;;EAED;EACA,MAAMW,iBAAiB,GAAIF,KAAK,IAAK;IACnC,MAAMG,IAAI,GAAGH,KAAK,CAACI,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAIF,IAAI,EAAE;MACR,IAAI,CAACA,IAAI,CAACG,IAAI,CAACC,KAAK,CAAC,SAAS,CAAC,EAAE;QAC/BhB,QAAQ,CAAC,SAAS,CAAC;QACnB;MACF;MAEAV,YAAY,CAACsB,IAAI,CAAC;MAClB,MAAMK,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAIC,CAAC,IAAK;QACrBhC,eAAe,CAACgC,CAAC,CAACP,MAAM,CAACQ,MAAM,CAAC;MAClC,CAAC;MACDJ,MAAM,CAACK,aAAa,CAACV,IAAI,CAAC;MAC1BZ,QAAQ,CAAC,EAAE,CAAC;IACd;EACF,CAAC;;EAED;EACA,MAAMuB,iBAAiB,GAAGA,CAAA,KAAM;IAC9BnC,eAAe,CAAC,IAAI,CAAC;IACrBE,YAAY,CAAC,IAAI,CAAC;IAClBM,iBAAiB,CAAC,EAAE,CAAC;IACrB,IAAIS,YAAY,CAACmB,OAAO,EAAE;MACxBnB,YAAY,CAACmB,OAAO,CAACC,KAAK,GAAG,EAAE;IACjC;EACF,CAAC;;EAED;EACA,MAAMC,sBAAsB,GAAG,MAAAA,CAAA,KAAY;IACzC,IAAI,CAACrC,SAAS,EAAE;MACdW,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;IAEAF,UAAU,CAAC,IAAI,CAAC;IAChBM,WAAW,CAAC,CAAC,CAAC;IACdJ,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF,MAAM2B,MAAM,GAAG,MAAMhD,YAAY,CAAC;QAChCiD,MAAM,EAAEC,CAAC,IAAI;UACX,IAAIA,CAAC,CAACC,MAAM,KAAK,kBAAkB,EAAE;YACnC1B,WAAW,CAAC2B,QAAQ,CAACF,CAAC,CAAC1B,QAAQ,GAAG,GAAG,CAAC,CAAC;UACzC;QACF;MACF,CAAC,CAAC;MAEF,MAAMwB,MAAM,CAACK,YAAY,CAAC,iBAAiB,CAAC;MAC5C,MAAML,MAAM,CAACM,UAAU,CAAC,iBAAiB,CAAC;MAC1C,MAAM;QAAEC;MAAK,CAAC,GAAG,MAAMP,MAAM,CAACQ,SAAS,CAAC9C,SAAS,CAAC;MAClDO,iBAAiB,CAACsC,IAAI,CAACE,IAAI,CAAC;MAC5B,MAAMT,MAAM,CAACU,SAAS,CAAC,CAAC;MACxBvC,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOwC,GAAG,EAAE;MACZC,OAAO,CAACxC,KAAK,CAAC,SAAS,EAAEuC,GAAG,CAAC;MAC7BtC,QAAQ,CAAC,YAAY,CAAC;MACtBF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAM0C,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;QAAEC,KAAK,EAAE;MAAK,CAAC,CAAC;MACzEvC,gBAAgB,CAACkB,OAAO,GAAG,IAAIsB,aAAa,CAACL,MAAM,CAAC;MACpDlC,cAAc,CAACiB,OAAO,GAAG,EAAE;MAE3BlB,gBAAgB,CAACkB,OAAO,CAACuB,eAAe,GAAItC,KAAK,IAAK;QACpD,IAAIA,KAAK,CAACyB,IAAI,CAACc,IAAI,GAAG,CAAC,EAAE;UACvBzC,cAAc,CAACiB,OAAO,CAACyB,IAAI,CAACxC,KAAK,CAACyB,IAAI,CAAC;QACzC;MACF,CAAC;MAED5B,gBAAgB,CAACkB,OAAO,CAAC0B,MAAM,GAAG,YAAY;QAC5C,MAAMC,SAAS,GAAG,IAAIC,IAAI,CAAC7C,cAAc,CAACiB,OAAO,EAAE;UAAET,IAAI,EAAE;QAAY,CAAC,CAAC;QACzE,MAAMsC,uBAAuB,CAACF,SAAS,CAAC;MAC1C,CAAC;MAED7C,gBAAgB,CAACkB,OAAO,CAAC8B,KAAK,CAAC,CAAC;MAChC5D,cAAc,CAAC,IAAI,CAAC;MACpBM,QAAQ,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,OAAOsC,GAAG,EAAE;MACZC,OAAO,CAACxC,KAAK,CAAC,UAAU,EAAEuC,GAAG,CAAC;MAC9BtC,QAAQ,CAAC,iBAAiB,CAAC;IAC7B;EACF,CAAC;;EAED;EACA,MAAMuD,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIjD,gBAAgB,CAACkB,OAAO,IAAI/B,WAAW,EAAE;MAC3Ca,gBAAgB,CAACkB,OAAO,CAACgC,IAAI,CAAC,CAAC;MAC/B9D,cAAc,CAAC,KAAK,CAAC;;MAErB;MACAY,gBAAgB,CAACkB,OAAO,CAACiB,MAAM,CAACgB,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACH,IAAI,CAAC,CAAC,CAAC;IAC5E;EACF,CAAC;;EAED;EACA,MAAMH,uBAAuB,GAAG,MAAOF,SAAS,IAAK;IACnDrD,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF;MACA,MAAM4D,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEX,SAAS,CAAC;;MAEnC;MACA,MAAMY,QAAQ,GAAG,MAAMC,KAAK,CAAC,qBAAqB,EAAE;QAClDC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEN,QAAQ;QACdO,OAAO,EAAE;UACP,eAAe,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC1D;MACF,CAAC,CAAC;MAEF,IAAIN,QAAQ,CAACO,EAAE,EAAE;QACf,MAAMpC,IAAI,GAAG,MAAM6B,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAClC/E,YAAY,CAAC0C,IAAI,CAACE,IAAI,CAAC;MACzB,CAAC,MAAM;QACL,MAAM,IAAIoC,KAAK,CAAC,UAAU,CAAC;MAC7B;IACF,CAAC,CAAC,OAAOlC,GAAG,EAAE;MACZC,OAAO,CAACxC,KAAK,CAAC,SAAS,EAAEuC,GAAG,CAAC;MAC7BtC,QAAQ,CAAC,YAAY,CAAC;IACxB,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAM2E,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAIC,YAAY,GAAG,EAAE;;IAErB;IACA,IAAIzF,SAAS,KAAK,CAAC,EAAE;MAAE;MACrByF,YAAY,GAAG/E,cAAc;IAC/B,CAAC,MAAM,IAAIV,SAAS,KAAK,CAAC,EAAE;MAAE;MAC5ByF,YAAY,GAAGnF,SAAS;IAC1B,CAAC,MAAM,IAAIN,SAAS,KAAK,CAAC,EAAE;MAAE;MAC5ByF,YAAY,GAAGnF,SAAS;IAC1B;IAEA,IAAI,CAACmF,YAAY,CAACC,IAAI,CAAC,CAAC,EAAE;MACxB3E,QAAQ,CAAC,YAAY,CAAC;MACtB;IACF;IAEAF,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF;MACA,MAAM+D,QAAQ,GAAG,MAAMC,KAAK,CAAC,gBAAgB,EAAE;QAC7CC,MAAM,EAAE,MAAM;QACdE,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC1D,CAAC;QACDH,IAAI,EAAEU,IAAI,CAACC,SAAS,CAAC;UACnBC,OAAO,EAAEJ,YAAY;UACrB3D,IAAI,EAAE9B,SAAS,KAAK,CAAC,GAAG,OAAO,GAAIA,SAAS,KAAK,CAAC,GAAG,OAAO,GAAG;QACjE,CAAC;MACH,CAAC,CAAC;MAEF,IAAI8E,QAAQ,CAACO,EAAE,EAAE;QACf,MAAMpC,IAAI,GAAG,MAAM6B,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAClCrE,UAAU,CAAC,IAAI,CAAC;QAChB;QACA6E,UAAU,CAAC,MAAM;UACf/F,QAAQ,CAAC,mBAAmBkD,IAAI,CAAC8C,UAAU,EAAE,CAAC;QAChD,CAAC,EAAE,IAAI,CAAC;MACV,CAAC,MAAM;QACL,MAAM,IAAIR,KAAK,CAAC,QAAQ,CAAC;MAC3B;IACF,CAAC,CAAC,OAAOlC,GAAG,EAAE;MACZC,OAAO,CAACxC,KAAK,CAAC,SAAS,EAAEuC,GAAG,CAAC;MAC7BtC,QAAQ,CAAC,YAAY,CAAC;IACxB,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMmF,oBAAoB,GAAGA,CAAA,kBAC3BpG,OAAA,CAACvB,GAAG;IAAC4H,EAAE,EAAE;MAAEC,EAAE,EAAE;IAAE,CAAE;IAAAC,QAAA,eACjBvG,OAAA,CAACpB,IAAI;MAAC4H,SAAS;MAACC,OAAO,EAAE,CAAE;MAAAF,QAAA,gBACzBvG,OAAA,CAACpB,IAAI;QAAC8H,IAAI;QAACC,EAAE,EAAE,EAAG;QAACC,EAAE,EAAE,CAAE;QAAAL,QAAA,eACvBvG,OAAA,CAACnB,IAAI;UAACgI,OAAO,EAAC,UAAU;UAACR,EAAE,EAAE;YAAES,MAAM,EAAE,MAAM;YAAEC,OAAO,EAAE,MAAM;YAAEC,aAAa,EAAE;UAAS,CAAE;UAAAT,QAAA,eACxFvG,OAAA,CAAClB,WAAW;YAAAyH,QAAA,gBACVvG,OAAA,CAACxB,UAAU;cAACqI,OAAO,EAAC,IAAI;cAACI,YAAY;cAAAV,QAAA,EAAC;YAEtC;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACbrH,OAAA,CAACxB,UAAU;cAACqI,OAAO,EAAC,OAAO;cAACS,KAAK,EAAC,gBAAgB;cAACC,SAAS;cAAAhB,QAAA,EAAC;YAE7D;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAEbrH,OAAA,CAACvB,GAAG;cAAC4H,EAAE,EAAE;gBAAEU,OAAO,EAAE,MAAM;gBAAES,cAAc,EAAE,QAAQ;gBAAElB,EAAE,EAAE;cAAE,CAAE;cAAAC,QAAA,gBAC5DvG,OAAA;gBACEyH,MAAM,EAAC,SAAS;gBAChBC,KAAK,EAAE;kBAAEX,OAAO,EAAE;gBAAO,CAAE;gBAC3BY,EAAE,EAAC,cAAc;gBACjBzF,IAAI,EAAC,MAAM;gBACX0F,QAAQ,EAAE9F,iBAAkB;gBAC5B+F,GAAG,EAAErG;cAAa;gBAAA0F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnB,CAAC,eACFrH,OAAA;gBAAO8H,OAAO,EAAC,cAAc;gBAAAvB,QAAA,eAC3BvG,OAAA,CAACtB,MAAM;kBACLmI,OAAO,EAAC,WAAW;kBACnBkB,SAAS,EAAC,MAAM;kBAChBC,SAAS,eAAEhI,OAAA,CAACT,WAAW;oBAAA2H,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAE;kBAC3BY,QAAQ,EAAEjH,OAAQ;kBAAAuF,QAAA,EACnB;gBAED;kBAAAW,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eAERrH,OAAA,CAACtB,MAAM;gBACLmI,OAAO,EAAC,UAAU;gBAClBS,KAAK,EAAC,SAAS;gBACfY,OAAO,EAAErF,sBAAuB;gBAChCoF,QAAQ,EAAE,CAAC3H,YAAY,IAAIU,OAAQ;gBACnCqF,EAAE,EAAE;kBAAE8B,EAAE,EAAE;gBAAE,CAAE;gBAAA5B,QAAA,EAEbvF,OAAO,GAAG,QAAQ,GAAG;cAAM;gBAAAkG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAELrG,OAAO,iBACNhB,OAAA,CAACvB,GAAG;cAAC4H,EAAE,EAAE;gBAAEU,OAAO,EAAE,MAAM;gBAAEC,aAAa,EAAE,QAAQ;gBAAEoB,UAAU,EAAE,QAAQ;gBAAE9B,EAAE,EAAE;cAAE,CAAE;cAAAC,QAAA,gBACjFvG,OAAA,CAACb,gBAAgB;gBAAC0H,OAAO,EAAC,aAAa;gBAACjE,KAAK,EAAEtB;cAAS;gBAAA4F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC3DrH,OAAA,CAACxB,UAAU;gBAACqI,OAAO,EAAC,OAAO;gBAACS,KAAK,EAAC,gBAAgB;gBAACjB,EAAE,EAAE;kBAAEC,EAAE,EAAE;gBAAE,CAAE;gBAAAC,QAAA,GAC9DjF,QAAQ,EAAC,gBACZ;cAAA;gBAAA4F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACU;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEPrH,OAAA,CAACpB,IAAI;QAAC8H,IAAI;QAACC,EAAE,EAAE,EAAG;QAACC,EAAE,EAAE,CAAE;QAAAL,QAAA,eACvBvG,OAAA,CAACnB,IAAI;UAACgI,OAAO,EAAC,UAAU;UAACR,EAAE,EAAE;YAAES,MAAM,EAAE,MAAM;YAAEC,OAAO,EAAE,MAAM;YAAEC,aAAa,EAAE;UAAS,CAAE;UAAAT,QAAA,eACxFvG,OAAA,CAAClB,WAAW;YAAAyH,QAAA,gBACVvG,OAAA,CAACxB,UAAU;cAACqI,OAAO,EAAC,IAAI;cAACI,YAAY;cAAAV,QAAA,EAAC;YAEtC;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,EAEZ/G,YAAY,gBACXN,OAAA,CAACvB,GAAG;cAAC4H,EAAE,EAAE;gBAAEgC,QAAQ,EAAE;cAAW,CAAE;cAAA9B,QAAA,gBAChCvG,OAAA,CAACjB,SAAS;gBACRgJ,SAAS,EAAC,KAAK;gBACfO,KAAK,EAAEhI,YAAa;gBACpBiI,GAAG,EAAC,0BAAM;gBACVlC,EAAE,EAAE;kBAAEmC,SAAS,EAAE,GAAG;kBAAEC,SAAS,EAAE,SAAS;kBAAEC,EAAE,EAAE;gBAAE;cAAE;gBAAAxB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrD,CAAC,eACFrH,OAAA,CAAChB,UAAU;gBACTmF,IAAI,EAAC,OAAO;gBACZmD,KAAK,EAAC,OAAO;gBACbY,OAAO,EAAExF,iBAAkB;gBAC3B2D,EAAE,EAAE;kBAAEgC,QAAQ,EAAE,UAAU;kBAAEM,GAAG,EAAE,CAAC;kBAAEC,KAAK,EAAE;gBAAE,CAAE;gBAAArC,QAAA,eAE/CvG,OAAA,CAACJ,MAAM;kBAAAsH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,gBAENrH,OAAA,CAACvB,GAAG;cACF4H,EAAE,EAAE;gBACFS,MAAM,EAAE,GAAG;gBACXC,OAAO,EAAE,MAAM;gBACfqB,UAAU,EAAE,QAAQ;gBACpBZ,cAAc,EAAE,QAAQ;gBACxBqB,OAAO,EAAE,SAAS;gBAClBC,YAAY,EAAE;cAChB,CAAE;cAAAvC,QAAA,eAEFvG,OAAA,CAACxB,UAAU;gBAACqI,OAAO,EAAC,OAAO;gBAACS,KAAK,EAAC,gBAAgB;gBAAAf,QAAA,EAAC;cAEnD;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACU;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEPrH,OAAA,CAACpB,IAAI;QAAC8H,IAAI;QAACC,EAAE,EAAE,EAAG;QAAAJ,QAAA,eAChBvG,OAAA,CAACnB,IAAI;UAACgI,OAAO,EAAC,UAAU;UAAAN,QAAA,eACtBvG,OAAA,CAAClB,WAAW;YAAAyH,QAAA,gBACVvG,OAAA,CAACxB,UAAU;cAACqI,OAAO,EAAC,IAAI;cAACI,YAAY;cAAAV,QAAA,EAAC;YAEtC;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAEbrH,OAAA,CAACrB,SAAS;cACRoK,SAAS;cACTC,SAAS;cACTC,IAAI,EAAE,CAAE;cACRpC,OAAO,EAAC,UAAU;cAClBqC,WAAW,EAAC,uEAAgB;cAC5BtG,KAAK,EAAE9B,cAAe;cACtB8G,QAAQ,EAAGrF,CAAC,IAAKxB,iBAAiB,CAACwB,CAAC,CAACP,MAAM,CAACY,KAAK,CAAE;cACnDqF,QAAQ,EAAEjH;YAAQ;cAAAkG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,eAEFrH,OAAA,CAACvB,GAAG;cAAC4H,EAAE,EAAE;gBAAEU,OAAO,EAAE,MAAM;gBAAES,cAAc,EAAE,UAAU;gBAAElB,EAAE,EAAE;cAAE,CAAE;cAAAC,QAAA,eAC9DvG,OAAA,CAACtB,MAAM;gBACLmI,OAAO,EAAC,WAAW;gBACnBS,KAAK,EAAC,SAAS;gBACf6B,OAAO,eAAEnJ,OAAA,CAACL,IAAI;kBAAAuH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAE;gBAClBa,OAAO,EAAEtC,oBAAqB;gBAC9BqC,QAAQ,EAAE,CAACnH,cAAc,CAACgF,IAAI,CAAC,CAAC,IAAI9E,OAAQ;gBAAAuF,QAAA,EAC7C;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CACN;;EAED;EACA,MAAM+B,mBAAmB,GAAGA,CAAA,kBAC1BpJ,OAAA,CAACvB,GAAG;IAAC4H,EAAE,EAAE;MAAEC,EAAE,EAAE;IAAE,CAAE;IAAAC,QAAA,eACjBvG,OAAA,CAACnB,IAAI;MAACgI,OAAO,EAAC,UAAU;MAAAN,QAAA,eACtBvG,OAAA,CAAClB,WAAW;QAAAyH,QAAA,gBACVvG,OAAA,CAACxB,UAAU;UAACqI,OAAO,EAAC,IAAI;UAACI,YAAY;UAAAV,QAAA,EAAC;QAEtC;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACbrH,OAAA,CAACxB,UAAU;UAACqI,OAAO,EAAC,OAAO;UAACS,KAAK,EAAC,gBAAgB;UAACC,SAAS;UAAAhB,QAAA,EAAC;QAE7D;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAEbrH,OAAA,CAACvB,GAAG;UAAC4H,EAAE,EAAE;YAAEU,OAAO,EAAE,MAAM;YAAES,cAAc,EAAE,QAAQ;YAAE6B,EAAE,EAAE;UAAE,CAAE;UAAA9C,QAAA,EAC3D3F,WAAW,gBACVZ,OAAA,CAACtB,MAAM;YACLmI,OAAO,EAAC,WAAW;YACnBS,KAAK,EAAC,OAAO;YACbU,SAAS,eAAEhI,OAAA,CAACN,MAAM;cAAAwH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAE;YACtBa,OAAO,EAAExD,aAAc;YACvBuD,QAAQ,EAAEjH,OAAQ;YAAAuF,QAAA,EACnB;UAED;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,gBAETrH,OAAA,CAACtB,MAAM;YACLmI,OAAO,EAAC,WAAW;YACnBS,KAAK,EAAC,SAAS;YACfU,SAAS,eAAEhI,OAAA,CAACP,GAAG;cAAAyH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAE;YACnBa,OAAO,EAAEvE,cAAe;YACxBsE,QAAQ,EAAEjH,OAAQ;YAAAuF,QAAA,EACnB;UAED;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QACT;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eAENrH,OAAA,CAACrB,SAAS;UACRoK,SAAS;UACTC,SAAS;UACTC,IAAI,EAAE,CAAE;UACRpC,OAAO,EAAC,UAAU;UAClByC,KAAK,EAAC,0BAAM;UACZJ,WAAW,EAAC,mFAAkB;UAC9BtG,KAAK,EAAElC,SAAU;UACjBkH,QAAQ,EAAGrF,CAAC,IAAK5B,YAAY,CAAC4B,CAAC,CAACP,MAAM,CAACY,KAAK,CAAE;UAC9CqF,QAAQ,EAAEjH;QAAQ;UAAAkG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC,eAEFrH,OAAA,CAACvB,GAAG;UAAC4H,EAAE,EAAE;YAAEU,OAAO,EAAE,MAAM;YAAES,cAAc,EAAE,UAAU;YAAElB,EAAE,EAAE;UAAE,CAAE;UAAAC,QAAA,eAC9DvG,OAAA,CAACtB,MAAM;YACLmI,OAAO,EAAC,WAAW;YACnBS,KAAK,EAAC,SAAS;YACf6B,OAAO,eAAEnJ,OAAA,CAACL,IAAI;cAAAuH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAE;YAClBa,OAAO,EAAEtC,oBAAqB;YAC9BqC,QAAQ,EAAE,CAACvH,SAAS,CAACoF,IAAI,CAAC,CAAC,IAAI9E,OAAQ;YAAAuF,QAAA,EACxC;UAED;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CACN;;EAED;EACA,MAAMkC,kBAAkB,GAAGA,CAAA,kBACzBvJ,OAAA,CAACvB,GAAG;IAAC4H,EAAE,EAAE;MAAEC,EAAE,EAAE;IAAE,CAAE;IAAAC,QAAA,eACjBvG,OAAA,CAACnB,IAAI;MAACgI,OAAO,EAAC,UAAU;MAAAN,QAAA,eACtBvG,OAAA,CAAClB,WAAW;QAAAyH,QAAA,gBACVvG,OAAA,CAACxB,UAAU;UAACqI,OAAO,EAAC,IAAI;UAACI,YAAY;UAAAV,QAAA,EAAC;QAEtC;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACbrH,OAAA,CAACxB,UAAU;UAACqI,OAAO,EAAC,OAAO;UAACS,KAAK,EAAC,gBAAgB;UAACC,SAAS;UAAAhB,QAAA,EAAC;QAE7D;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAEbrH,OAAA,CAACrB,SAAS;UACRoK,SAAS;UACTC,SAAS;UACTC,IAAI,EAAE,CAAE;UACRpC,OAAO,EAAC,UAAU;UAClByC,KAAK,EAAC,0BAAM;UACZJ,WAAW,EAAC,+CAAY;UACxBtG,KAAK,EAAElC,SAAU;UACjBkH,QAAQ,EAAGrF,CAAC,IAAK5B,YAAY,CAAC4B,CAAC,CAACP,MAAM,CAACY,KAAK,CAAE;UAC9CqF,QAAQ,EAAEjH;QAAQ;UAAAkG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC,eAEFrH,OAAA,CAACvB,GAAG;UAAC4H,EAAE,EAAE;YAAEU,OAAO,EAAE,MAAM;YAAES,cAAc,EAAE,UAAU;YAAElB,EAAE,EAAE;UAAE,CAAE;UAAAC,QAAA,eAC9DvG,OAAA,CAACtB,MAAM;YACLmI,OAAO,EAAC,WAAW;YACnBS,KAAK,EAAC,SAAS;YACf6B,OAAO,eAAEnJ,OAAA,CAACL,IAAI;cAAAuH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAE;YAClBa,OAAO,EAAEtC,oBAAqB;YAC9BqC,QAAQ,EAAE,CAACvH,SAAS,CAACoF,IAAI,CAAC,CAAC,IAAI9E,OAAQ;YAAAuF,QAAA,EACxC;UAED;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CACN;EAED,oBACErH,OAAA,CAAC1B,SAAS;IAACkL,QAAQ,EAAC,IAAI;IAAAjD,QAAA,eACtBvG,OAAA,CAACzB,KAAK;MAACkL,SAAS,EAAE,CAAE;MAACpD,EAAE,EAAE;QAAEqD,CAAC,EAAE,CAAC;QAAEpD,EAAE,EAAE;MAAE,CAAE;MAAAC,QAAA,gBACvCvG,OAAA,CAACvB,GAAG;QAAC4H,EAAE,EAAE;UAAEU,OAAO,EAAE,MAAM;UAAEqB,UAAU,EAAE,QAAQ;UAAEM,EAAE,EAAE;QAAE,CAAE;QAAAnC,QAAA,gBACxDvG,OAAA,CAACH,IAAI;UAACyH,KAAK,EAAC,SAAS;UAACjB,EAAE,EAAE;YAAEsD,QAAQ,EAAE,EAAE;YAAEC,EAAE,EAAE;UAAE;QAAE;UAAA1C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACrDrH,OAAA,CAACxB,UAAU;UAACqI,OAAO,EAAC,IAAI;UAAAN,QAAA,EAAC;QAEzB;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eAENrH,OAAA,CAACxB,UAAU;QAACqI,OAAO,EAAC,OAAO;QAACU,SAAS;QAAAhB,QAAA,EAAC;MAEtC;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eAEbrH,OAAA,CAACf,IAAI;QACH2D,KAAK,EAAExC,SAAU;QACjBwH,QAAQ,EAAEjG,eAAgB;QAC1BkF,OAAO,EAAC,WAAW;QACnBgD,cAAc,EAAC,SAAS;QACxBC,SAAS,EAAC,SAAS;QAAAvD,QAAA,gBAEnBvG,OAAA,CAACd,GAAG;UAAC6K,IAAI,eAAE/J,OAAA,CAACR,SAAS;YAAA0H,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAACiC,KAAK,EAAC;QAAM;UAAApC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACzCrH,OAAA,CAACd,GAAG;UAAC6K,IAAI,eAAE/J,OAAA,CAACP,GAAG;YAAAyH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAACiC,KAAK,EAAC;QAAM;UAAApC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACnCrH,OAAA,CAACd,GAAG;UAAC6K,IAAI,eAAE/J,OAAA,CAACL,IAAI;YAAAuH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAACiC,KAAK,EAAC;QAAM;UAAApC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CAAC,EAENjH,SAAS,KAAK,CAAC,IAAIgG,oBAAoB,CAAC,CAAC,EACzChG,SAAS,KAAK,CAAC,IAAIgJ,mBAAmB,CAAC,CAAC,EACxChJ,SAAS,KAAK,CAAC,IAAImJ,kBAAkB,CAAC,CAAC,EAEvCrI,KAAK,iBACJlB,OAAA,CAACZ,KAAK;QAAC4K,QAAQ,EAAC,OAAO;QAAC3D,EAAE,EAAE;UAAEC,EAAE,EAAE;QAAE,CAAE;QAAAC,QAAA,EACnCrF;MAAK;QAAAgG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CACR,eAEDrH,OAAA,CAACX,QAAQ;QACP4K,IAAI,EAAE7I,OAAQ;QACd8I,gBAAgB,EAAE,IAAK;QACvBC,OAAO,EAAEA,CAAA,KAAM9I,UAAU,CAAC,KAAK,CAAE;QACjC+I,YAAY,EAAE;UAAEC,QAAQ,EAAE,QAAQ;UAAEC,UAAU,EAAE;QAAS,CAAE;QAAA/D,QAAA,eAE3DvG,OAAA,CAACZ,KAAK;UAAC4K,QAAQ,EAAC,SAAS;UAAC3D,EAAE,EAAE;YAAEkE,KAAK,EAAE;UAAO,CAAE;UAAAhE,QAAA,EAAC;QAEjD;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEhB;AAACnH,EAAA,CAxfQD,cAAc;EAAA,QACJ5B,WAAW;AAAA;AAAAmM,EAAA,GADrBvK,cAAc;AA0fvB,eAAeA,cAAc;AAAC,IAAAuK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}