{"ast":null,"code":"var _jsxFileName = \"D:\\\\university_math\\\\src\\\\components\\\\Questions\\\\QuestionUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Container, Paper, Typography, Box, Button, TextField, Grid, Card, CardContent, CardMedia, IconButton, Tabs, Tab, CircularProgress, Alert, Snackbar } from '@mui/material';\nimport { CloudUpload, CameraAlt, Send, Delete, Help } from '@mui/icons-material';\nimport { createWorker } from 'tesseract.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction QuestionUpload() {\n  _s();\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState(0);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageFile, setImageFile] = useState(null);\n  const [textInput, setTextInput] = useState('');\n  const [recognizedText, setRecognizedText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const fileInputRef = useRef(null);\n\n  // 处理标签页切换\n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n    // 重置状态\n    setImagePreview(null);\n    setImageFile(null);\n    setTextInput('');\n    setRecognizedText('');\n    setError('');\n  };\n\n  // 处理图片选择\n  const handleImageSelect = event => {\n    const file = event.target.files[0];\n    if (file) {\n      if (!file.type.match('image.*')) {\n        setError('请上传图片文件');\n        return;\n      }\n      setImageFile(file);\n      const reader = new FileReader();\n      reader.onload = e => {\n        setImagePreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n      setError('');\n    }\n  };\n\n  // 处理图片删除\n  const handleImageDelete = () => {\n    setImagePreview(null);\n    setImageFile(null);\n    setRecognizedText('');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // 处理图片识别\n  const handleImageRecognition = async () => {\n    if (!imageFile) {\n      setError('请先上传图片');\n      return;\n    }\n    setLoading(true);\n    setProgress(0);\n    setError('');\n    try {\n      const worker = await createWorker({\n        logger: m => {\n          if (m.status === 'recognizing text') {\n            setProgress(parseInt(m.progress * 100));\n          }\n        }\n      });\n      await worker.loadLanguage('eng+chi_sim+equ');\n      await worker.initialize('eng+chi_sim+equ');\n      const {\n        data\n      } = await worker.recognize(imageFile);\n      setRecognizedText(data.text);\n      await worker.terminate();\n      setLoading(false);\n    } catch (err) {\n      console.error('图像识别失败:', err);\n      setError('图像识别失败，请重试');\n      setLoading(false);\n    }\n  };\n\n  // 处理问题提交\n  const handleSubmitQuestion = async () => {\n    let questionText = '';\n\n    // 根据当前标签页获取问题文本\n    if (activeTab === 0) {\n      // 图片上传\n      questionText = recognizedText;\n    } else if (activeTab === 1) {\n      // 文字输入\n      questionText = textInput;\n    }\n    if (!questionText.trim()) {\n      setError('请输入或上传题目内容');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      // 发送到后端API\n      const response = await fetch('/api/questions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          content: questionText,\n          type: activeTab === 0 ? 'image' : 'text'\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setSuccess(true);\n        // 导航到解题页面\n        setTimeout(() => {\n          navigate(`/solve-question/${data.questionId}`);\n        }, 1500);\n      } else {\n        throw new Error('提交问题失败');\n      }\n    } catch (err) {\n      console.error('提交问题失败:', err);\n      setError('提交问题失败，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 渲染图片上传标签页\n  const renderImageUploadTab = () => /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 3\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          sx: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u4E0A\\u4F20\\u9898\\u76EE\\u56FE\\u7247\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              paragraph: true,\n              children: \"\\u652F\\u6301JPG\\u3001PNG\\u683C\\u5F0F\\u7684\\u56FE\\u7247\\uFF0C\\u8BF7\\u786E\\u4FDD\\u56FE\\u7247\\u6E05\\u6670\\u53EF\\u89C1\\u3002\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: 'center',\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                accept: \"image/*\",\n                style: {\n                  display: 'none'\n                },\n                id: \"image-upload\",\n                type: \"file\",\n                onChange: handleImageSelect,\n                ref: fileInputRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"image-upload\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  component: \"span\",\n                  startIcon: /*#__PURE__*/_jsxDEV(CloudUpload, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 32\n                  }, this),\n                  disabled: loading,\n                  children: \"\\u9009\\u62E9\\u56FE\\u7247\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                color: \"primary\",\n                onClick: handleImageRecognition,\n                disabled: !imagePreview || loading,\n                sx: {\n                  ml: 2\n                },\n                children: loading ? '识别中...' : '识别文字'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), loading && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                variant: \"determinate\",\n                value: progress\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                sx: {\n                  mt: 1\n                },\n                children: [progress, \"% \\u5B8C\\u6210\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          sx: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u9884\\u89C8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), imagePreview ? /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                position: 'relative'\n              },\n              children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n                component: \"img\",\n                image: imagePreview,\n                alt: \"\\u9898\\u76EE\\u56FE\\u7247\",\n                sx: {\n                  maxHeight: 200,\n                  objectFit: 'contain',\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                color: \"error\",\n                onClick: handleImageDelete,\n                sx: {\n                  position: 'absolute',\n                  top: 0,\n                  right: 0\n                },\n                children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                height: 200,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                bgcolor: '#f5f5f5',\n                borderRadius: 1\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: \"\\u672A\\u9009\\u62E9\\u56FE\\u7247\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u8BC6\\u522B\\u7ED3\\u679C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              multiline: true,\n              rows: 4,\n              variant: \"outlined\",\n              placeholder: \"\\u8BC6\\u522B\\u7684\\u6587\\u5B57\\u5C06\\u663E\\u793A\\u5728\\u8FD9\\u91CC...\",\n              value: recognizedText,\n              onChange: e => setRecognizedText(e.target.value),\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: 'flex-end',\n                mt: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                color: \"primary\",\n                endIcon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 28\n                }, this),\n                onClick: handleSubmitQuestion,\n                disabled: !recognizedText.trim() || loading,\n                children: \"\\u63D0\\u4EA4\\u9898\\u76EE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n\n  // 渲染文字输入标签页\n  const renderTextInputTab = () => /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      mt: 3\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      variant: \"outlined\",\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"\\u6587\\u5B57\\u8F93\\u5165\\u9898\\u76EE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          paragraph: true,\n          children: \"\\u76F4\\u63A5\\u8F93\\u5165\\u60A8\\u7684\\u9898\\u76EE\\u5185\\u5BB9\\uFF0C\\u652F\\u6301\\u6570\\u5B66\\u516C\\u5F0F\\u548C\\u7B26\\u53F7\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          multiline: true,\n          rows: 6,\n          variant: \"outlined\",\n          label: \"\\u9898\\u76EE\\u5185\\u5BB9\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u9898\\u76EE...\",\n          value: textInput,\n          onChange: e => setTextInput(e.target.value),\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            endIcon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 24\n            }, this),\n            onClick: handleSubmitQuestion,\n            disabled: !textInput.trim() || loading,\n            children: \"\\u63D0\\u4EA4\\u9898\\u76EE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 307,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 4,\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Help, {\n          color: \"primary\",\n          sx: {\n            fontSize: 40,\n            mr: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: \"\\u9898\\u76EE\\u4E0A\\u4F20\\u4E0E\\u8BC6\\u522B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        paragraph: true,\n        children: \"\\u60A8\\u53EF\\u4EE5\\u901A\\u8FC7\\u56FE\\u7247\\u4E0A\\u4F20\\u6216\\u6587\\u5B57\\u8F93\\u5165\\u7684\\u65B9\\u5F0F\\u63D0\\u4EA4\\u6570\\u5B66\\u9898\\u76EE\\uFF0C\\u7CFB\\u7EDF\\u5C06\\u4E3A\\u60A8\\u63D0\\u4F9B\\u8BE6\\u7EC6\\u7684\\u89E3\\u7B54\\u6B65\\u9AA4\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n        value: activeTab,\n        onChange: handleTabChange,\n        variant: \"fullWidth\",\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          icon: /*#__PURE__*/_jsxDEV(CameraAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 22\n          }, this),\n          label: \"\\u56FE\\u7247\\u4E0A\\u4F20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          icon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 22\n          }, this),\n          label: \"\\u6587\\u5B57\\u8F93\\u5165\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), activeTab === 0 && renderImageUploadTab(), activeTab === 1 && renderTextInputTab(), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mt: 3\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: success,\n        autoHideDuration: 3000,\n        onClose: () => setSuccess(false),\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"success\",\n          sx: {\n            width: '100%'\n          },\n          children: \"\\u9898\\u76EE\\u63D0\\u4EA4\\u6210\\u529F\\uFF0C\\u6B63\\u5728\\u8DF3\\u8F6C\\u5230\\u89E3\\u7B54\\u9875\\u9762...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 346,\n    columnNumber: 5\n  }, this);\n}\n_s(QuestionUpload, \"Xs2e5BlRQ4Rd4Q5WxnFBNq/NA/Q=\", false, function () {\n  return [useNavigate];\n});\n_c = QuestionUpload;\nexport default QuestionUpload;\nvar _c;\n$RefreshReg$(_c, \"QuestionUpload\");","map":{"version":3,"names":["React","useState","useRef","useNavigate","Container","Paper","Typography","Box","Button","TextField","Grid","Card","CardContent","CardMedia","IconButton","Tabs","Tab","CircularProgress","Alert","Snackbar","CloudUpload","CameraAlt","Send","Delete","Help","createWorker","jsxDEV","_jsxDEV","QuestionUpload","_s","navigate","activeTab","setActiveTab","imagePreview","setImagePreview","imageFile","setImageFile","textInput","setTextInput","recognizedText","setRecognizedText","loading","setLoading","error","setError","success","setSuccess","progress","setProgress","fileInputRef","handleTabChange","event","newValue","handleImageSelect","file","target","files","type","match","reader","FileReader","onload","e","result","readAsDataURL","handleImageDelete","current","value","handleImageRecognition","worker","logger","m","status","parseInt","loadLanguage","initialize","data","recognize","text","terminate","err","console","handleSubmitQuestion","questionText","trim","response","fetch","method","headers","localStorage","getItem","body","JSON","stringify","content","ok","json","setTimeout","questionId","Error","renderImageUploadTab","sx","mt","children","container","spacing","item","xs","md","variant","height","display","flexDirection","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","paragraph","justifyContent","accept","style","id","onChange","ref","htmlFor","component","startIcon","disabled","onClick","ml","alignItems","position","image","alt","maxHeight","objectFit","mb","size","top","right","bgcolor","borderRadius","fullWidth","multiline","rows","placeholder","endIcon","renderTextInputTab","label","maxWidth","elevation","p","fontSize","mr","indicatorColor","textColor","icon","severity","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","width","_c","$RefreshReg$"],"sources":["D:/university_math/src/components/Questions/QuestionUpload.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  IconButton,\r\n  Tabs,\r\n  Tab,\r\n  CircularProgress,\r\n  Alert,\r\n  Snackbar\r\n} from '@mui/material';\r\nimport {\r\n  CloudUpload,\r\n  CameraAlt,\r\n  Send,\r\n  Delete,\r\n  Help\r\n} from '@mui/icons-material';\r\nimport { createWorker } from 'tesseract.js';\r\n\r\nfunction QuestionUpload() {\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const [textInput, setTextInput] = useState('');\r\n  const [recognizedText, setRecognizedText] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  \r\n  const fileInputRef = useRef(null);\r\n  \r\n  // 处理标签页切换\r\n  const handleTabChange = (event, newValue) => {\r\n    setActiveTab(newValue);\r\n    // 重置状态\r\n    setImagePreview(null);\r\n    setImageFile(null);\r\n    setTextInput('');\r\n    setRecognizedText('');\r\n    setError('');\r\n  };\r\n  \r\n  // 处理图片选择\r\n  const handleImageSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      if (!file.type.match('image.*')) {\r\n        setError('请上传图片文件');\r\n        return;\r\n      }\r\n      \r\n      setImageFile(file);\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImagePreview(e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n      setError('');\r\n    }\r\n  };\r\n  \r\n  // 处理图片删除\r\n  const handleImageDelete = () => {\r\n    setImagePreview(null);\r\n    setImageFile(null);\r\n    setRecognizedText('');\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n  \r\n  // 处理图片识别\r\n  const handleImageRecognition = async () => {\r\n    if (!imageFile) {\r\n      setError('请先上传图片');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setProgress(0);\r\n    setError('');\r\n    \r\n    try {\r\n      const worker = await createWorker({\r\n        logger: m => {\r\n          if (m.status === 'recognizing text') {\r\n            setProgress(parseInt(m.progress * 100));\r\n          }\r\n        },\r\n      });\r\n      \r\n      await worker.loadLanguage('eng+chi_sim+equ');\r\n      await worker.initialize('eng+chi_sim+equ');\r\n      const { data } = await worker.recognize(imageFile);\r\n      setRecognizedText(data.text);\r\n      await worker.terminate();\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('图像识别失败:', err);\r\n      setError('图像识别失败，请重试');\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 处理问题提交\r\n  const handleSubmitQuestion = async () => {\r\n    let questionText = '';\r\n    \r\n    // 根据当前标签页获取问题文本\r\n    if (activeTab === 0) { // 图片上传\r\n      questionText = recognizedText;\r\n    } else if (activeTab === 1) { // 文字输入\r\n      questionText = textInput;\r\n    }\r\n    \r\n    if (!questionText.trim()) {\r\n      setError('请输入或上传题目内容');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      // 发送到后端API\r\n      const response = await fetch('/api/questions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({\r\n          content: questionText,\r\n          type: activeTab === 0 ? 'image' : 'text'\r\n        })\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSuccess(true);\r\n        // 导航到解题页面\r\n        setTimeout(() => {\r\n          navigate(`/solve-question/${data.questionId}`);\r\n        }, 1500);\r\n      } else {\r\n        throw new Error('提交问题失败');\r\n      }\r\n    } catch (err) {\r\n      console.error('提交问题失败:', err);\r\n      setError('提交问题失败，请重试');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // 渲染图片上传标签页\r\n  const renderImageUploadTab = () => (\r\n    <Box sx={{ mt: 3 }}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={6}>\r\n          <Card variant=\"outlined\" sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                上传题目图片\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n                支持JPG、PNG格式的图片，请确保图片清晰可见。\r\n              </Typography>\r\n              \r\n              <Box sx={{ display: 'flex', justifyContent: 'center', mt: 2 }}>\r\n                <input\r\n                  accept=\"image/*\"\r\n                  style={{ display: 'none' }}\r\n                  id=\"image-upload\"\r\n                  type=\"file\"\r\n                  onChange={handleImageSelect}\r\n                  ref={fileInputRef}\r\n                />\r\n                <label htmlFor=\"image-upload\">\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    component=\"span\"\r\n                    startIcon={<CloudUpload />}\r\n                    disabled={loading}\r\n                  >\r\n                    选择图片\r\n                  </Button>\r\n                </label>\r\n                \r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={handleImageRecognition}\r\n                  disabled={!imagePreview || loading}\r\n                  sx={{ ml: 2 }}\r\n                >\r\n                  {loading ? '识别中...' : '识别文字'}\r\n                </Button>\r\n              </Box>\r\n              \r\n              {loading && (\r\n                <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', mt: 2 }}>\r\n                  <CircularProgress variant=\"determinate\" value={progress} />\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\r\n                    {progress}% 完成\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} md={6}>\r\n          <Card variant=\"outlined\" sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                预览\r\n              </Typography>\r\n              \r\n              {imagePreview ? (\r\n                <Box sx={{ position: 'relative' }}>\r\n                  <CardMedia\r\n                    component=\"img\"\r\n                    image={imagePreview}\r\n                    alt=\"题目图片\"\r\n                    sx={{ maxHeight: 200, objectFit: 'contain', mb: 2 }}\r\n                  />\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    color=\"error\"\r\n                    onClick={handleImageDelete}\r\n                    sx={{ position: 'absolute', top: 0, right: 0 }}\r\n                  >\r\n                    <Delete />\r\n                  </IconButton>\r\n                </Box>\r\n              ) : (\r\n                <Box\r\n                  sx={{\r\n                    height: 200,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    bgcolor: '#f5f5f5',\r\n                    borderRadius: 1\r\n                  }}\r\n                >\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    未选择图片\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n        \r\n        <Grid item xs={12}>\r\n          <Card variant=\"outlined\">\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                识别结果\r\n              </Typography>\r\n              \r\n              <TextField\r\n                fullWidth\r\n                multiline\r\n                rows={4}\r\n                variant=\"outlined\"\r\n                placeholder=\"识别的文字将显示在这里...\"\r\n                value={recognizedText}\r\n                onChange={(e) => setRecognizedText(e.target.value)}\r\n                disabled={loading}\r\n              />\r\n              \r\n              <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  endIcon={<Send />}\r\n                  onClick={handleSubmitQuestion}\r\n                  disabled={!recognizedText.trim() || loading}\r\n                >\r\n                  提交题目\r\n                </Button>\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n  \r\n  // 渲染文字输入标签页\r\n  const renderTextInputTab = () => (\r\n    <Box sx={{ mt: 3 }}>\r\n      <Card variant=\"outlined\">\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            文字输入题目\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n            直接输入您的题目内容，支持数学公式和符号。\r\n          </Typography>\r\n          \r\n          <TextField\r\n            fullWidth\r\n            multiline\r\n            rows={6}\r\n            variant=\"outlined\"\r\n            label=\"题目内容\"\r\n            placeholder=\"请输入您的题目...\"\r\n            value={textInput}\r\n            onChange={(e) => setTextInput(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n          \r\n          <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              endIcon={<Send />}\r\n              onClick={handleSubmitQuestion}\r\n              disabled={!textInput.trim() || loading}\r\n            >\r\n              提交题目\r\n            </Button>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n  \r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Paper elevation={3} sx={{ p: 4, mt: 4 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\r\n          <Help color=\"primary\" sx={{ fontSize: 40, mr: 2 }} />\r\n          <Typography variant=\"h4\">\r\n            题目上传与识别\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Typography variant=\"body1\" paragraph>\r\n          您可以通过图片上传或文字输入的方式提交数学题目，系统将为您提供详细的解答步骤。\r\n        </Typography>\r\n        \r\n        <Tabs\r\n          value={activeTab}\r\n          onChange={handleTabChange}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n        >\r\n          <Tab icon={<CameraAlt />} label=\"图片上传\" />\r\n          <Tab icon={<Send />} label=\"文字输入\" />\r\n        </Tabs>\r\n        \r\n        {activeTab === 0 && renderImageUploadTab()}\r\n        {activeTab === 1 && renderTextInputTab()}\r\n        \r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mt: 3 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        \r\n        <Snackbar\r\n          open={success}\r\n          autoHideDuration={3000}\r\n          onClose={() => setSuccess(false)}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n        >\r\n          <Alert severity=\"success\" sx={{ width: '100%' }}>\r\n            题目提交成功，正在跳转到解答页面...\r\n          </Alert>\r\n        </Snackbar>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default QuestionUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}